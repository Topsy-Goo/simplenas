<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import ru.gb.simplenas.client.services.impl.*?>
<!--<?import -->

<?import com.sun.javafx.scene.control.skin.SplitPaneSkin.Content?>
<VBox	fx:id="rootbox"
		alignment="center"
		minHeight="600.0" minWidth="800.0"
		xmlns="http://javafx.com/javafx/11.0.1"
		xmlns:fx="http://javafx.com/fxml/1"
		fx:controller="ru.gb.simplenas.client.Controller"
		stylesheets="cellstyles.css"
		spacing="5">


    <!-- Пути  -->
	<!-- Названия полей ввода (статические элементы)  -->
	<!-- поля ввода - Адресные строки -->
	<!-- Кнопки для перехода на 1 уровень вверх       -->
    <HBox spacing="3">
		<VBox>
			<Text text="Локальная папка: " fx:id="textLocalFolder" textOrigin="BOTTOM" />
			<HBox.margin><Insets top="5"/></HBox.margin>
		</VBox>
		<TextField fx:id="textfieldCurrentPath_Client" onAction="#onactionTextField_Client_ApplyAsPath" HBox.hgrow="ALWAYS" />
		<Button fx:id="buttonLevelUp_Client" onAction="#onactionButton_Client_LevelUp" text="▲" />
		<VBox.margin><Insets left="5" right="5" top="5" /></VBox.margin>
	</HBox>
	<HBox spacing="3">
		<VBox>
			<Text text="Удалённая папка: " fx:id="textServerFolder" textOrigin="BOTTOM" />
			<HBox.margin><Insets top="5"/></HBox.margin>
		</VBox>
		<TextField fx:id="textfieldCurrentPath_Server" onAction="#onactionTextField_Server_ApplyAsPath" HBox.hgrow="ALWAYS" />
		<Button fx:id="buttonLevelUp_Server" onAction="#onactionButton_Server_LevelUp" text="▲" />
		<VBox.margin><Insets left="5" right="5" /></VBox.margin>
	</HBox>


    <!-- Панели (панели расталкивают отстальные элементы управления к границам окна). maxWidth="10" minWidth="10" prefWidth="10"  -->
	<SplitPane dividerPositions="0.5" VBox.vgrow="ALWAYS">

		<!-- Client TableView -->
		<TableView fx:id="tvClientSide" editable="true" minWidth="100" onMouseClicked="#tvOnMouseClickedClient"> <!--   -->

            <columns>
            	<TableColumn fx:id="columnClientFolderMark" minWidth="30" text="D">
					<cellValueFactory>
						<PropertyValueFactory property="folderMark"/>
					</cellValueFactory>
				</TableColumn>
				<TableColumn fx:id="columnClientFileName" minWidth="30" prefWidth="150" text="Имя"> <!--  cellValueFactory="#cellValueFactory_Name"	editable="false"  -->
					<cellValueFactory>
						<PropertyValueFactory property="fileName" />
					</cellValueFactory>
					<cellFactory>
						<FormattedTableCellFactory alignment="right">
						</FormattedTableCellFactory>
					</cellFactory>
				</TableColumn>
				<TableColumn fx:id="columnClientFileSize" minWidth="30" prefWidth="100" text="Размер"> <!--  cellValueFactory="#cellValueFactory_Size"	  -->
					<cellValueFactory>
						<PropertyValueFactory property="size" />
					</cellValueFactory>
					<cellFactory>
						<FormattedTableCellFactory alignment="right">
						</FormattedTableCellFactory>
					</cellFactory>
				</TableColumn>
				<TableColumn fx:id="columnClientModified" minWidth="30" text="Изменён"> <!--  cellValueFactory="#cellValueFactory_mTime"  -->
					<cellValueFactory><PropertyValueFactory property="timeModified" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn fx:id="columnClientCreated" minWidth="30" text="Создан"> <!--  cellValueFactory="#cellValueFactory_cTime"  -->
					<cellValueFactory><PropertyValueFactory property="timeCreated" />
					</cellValueFactory>
				</TableColumn>
			</columns>

			<!-- Строки можно добавлять вручную, предварительно создав класс TableFileInfo. -->

<!--			<sortOrder>-->
<!--				<fx:reference source="columnClientFolderMark"/>-->
<!--			</sortOrder>-->

			<contextMenu>
				<ContextMenu fx:id="menuClientTableActions">
					<items>
						<!-- userData показывает для каких объектов каталога предназначен пункт. -->
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuClient_OpenFolder" text="Открыть папку" userData="dir" />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuClient_Upload" text="Отправить файл на сервер" userData="file" />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuClient_CreateFolder" text="Создать папку" />
						<SeparatorMenuItem />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuClient_Delete" text="Удалить" userData="any" />
					</items>
				</ContextMenu>
			</contextMenu>

		</TableView>

		<!-- Server TableView -->
		<TableView fx:id="tvServerSide" editable="true" minWidth="100" onMouseClicked="#tvOnMouseClickedServer"> <!--   -->

            <columns>
            	<TableColumn fx:id="columnServerFolderMark" minWidth="30" text="D">
					<cellValueFactory><PropertyValueFactory property="folderMark" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn fx:id="columnServerFileName" minWidth="30" prefWidth="150" text="Имя"> <!--  cellValueFactory="#cellValueFactory_Name"	editable="false"  -->
					<cellValueFactory><PropertyValueFactory property="fileName" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn fx:id="columnServerFileSize" minWidth="30" prefWidth="100" text="Размер"> <!--  cellValueFactory="#cellValueFactory_Size"	  -->
					<cellValueFactory>
						<PropertyValueFactory property="size" />
					</cellValueFactory>
					<cellFactory>
						<FormattedTableCellFactory alignment="right">
						</FormattedTableCellFactory>
					</cellFactory>
				</TableColumn>
				<TableColumn fx:id="columnServerModified" minWidth="30" text="Изменён"> <!--  cellValueFactory="#cellValueFactory_mTime"  -->
					<cellValueFactory><PropertyValueFactory property="timeModified" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn fx:id="columnServerCreated" minWidth="30" text="Создан"> <!--  cellValueFactory="#cellValueFactory_cTime"  -->
					<cellValueFactory><PropertyValueFactory property="timeCreated" />
					</cellValueFactory>
				</TableColumn>
			</columns>

			<!-- Строки можно добавлять вручную, предварительно создав класс TableFileInfo. -->

<!--			<sortOrder>-->
<!--				<fx:reference source="columnServerFolderMark"/>-->
<!--			</sortOrder>-->

			<contextMenu>
				<ContextMenu fx:id="menuServerTableActions">
					<items>
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuServer_OpenFolder" text="Открыть папку" userData="dir" />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenu_Download" text="Отправить файл клиенту" userData="file" />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuServer_CreateFolder" text="Создать папку" />
						<SeparatorMenuItem />
						<MenuItem mnemonicParsing="false" onAction="#onactionMenuServer_Delete" text="Удалить" userData="any" />
<!--					<MenuItem text="Вырезать"	visible="false"	onAction="#onactionMenuServer_CutFolder" mnemonicParsing="false"/>-->
<!--					<MenuItem text="Вставить"	visible="false"	onAction="#onactionMenuServer_PasteFolder" mnemonicParsing="false"/>-->
					</items>
				</ContextMenu>
			</contextMenu>

		</TableView>

		<VBox.margin><Insets left="5" right="5" /></VBox.margin>
	</SplitPane>


    <!-- Кнопки Upload (Отправить) и Download (Получить)  -->
    <HBox>
        <HBox alignment="CENTER" HBox.hgrow="ALWAYS">
            <Button fx:id="buttonUpload" alignment="CENTER" onAction="#onactionMenuClient_Upload" text="Отправить на сервер &gt;" />
        </HBox>
        <HBox alignment="CENTER" HBox.hgrow="ALWAYS">
            <Button fx:id="buttonDownload" alignment="CENTER" onAction="#onactionMenu_Download" text="&lt; Загрузить с сервера" />
        </HBox>
        <VBox.margin><Insets left="5" right="5" /></VBox.margin>
    </HBox>


    <!-- Строка состояния  -->
    <HBox>
        <Text fx:id="textStatusBar" />
        <VBox.margin><Insets bottom="5" left="5" right="5" /></VBox.margin>
    </HBox>

</VBox>
