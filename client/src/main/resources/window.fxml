<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import ru.gb.simplenas.client.services.impl.FormattedTableCellFactory?>
<VBox
        xmlns:fx="http://javafx.com/fxml"
        xmlns="http://javafx.com/javafx"
        fx:controller="ru.gb.simplenas.client.Controller"
        minHeight="600.0" minWidth="800.0"

        fx:id="rootbox"
        alignment="center">

    <HBox>
        <VBox HBox.hgrow="NEVER" VBox.vgrow="NEVER">
            <VBox VBox.vgrow="ALWAYS">
                <Text text="Текущая локальная папка: "/>
                <VBox.margin><Insets top="3" bottom="10" right="3"/></VBox.margin>
            </VBox>
            <VBox VBox.vgrow="ALWAYS">
                <Text text="Текущая удалённая папка: "/>
            </VBox>
        </VBox>
        <VBox HBox.hgrow="ALWAYS" VBox.vgrow="NEVER">
            <VBox HBox.hgrow="ALWAYS">
                <TextField fx:id="textfieldCurrentPath_Client" onAction="#onactionTextField_Client_ApplyAsPath"/>
                <VBox.margin><Insets bottom="5"/></VBox.margin>
            </VBox>
            <VBox HBox.hgrow="ALWAYS">
                <TextField fx:id="textfieldCurrentPath_Server" onAction="#onactionTextField_Server_ApplyAsPath"/>
            </VBox>
        </VBox>
        <VBox HBox.hgrow="NEVER">
            <VBox>
                <Button text="▲" fx:id="buttonLevelUp_Client" onAction="#onactionButton_Client_LevelUp"/>
                <VBox.margin><Insets bottom="5" left="3"/></VBox.margin>
            </VBox>
            <VBox>
                <Button text="▲" fx:id="buttonLevelUp_Server" onAction="#onactionButton_Server_LevelUp"/>
                <VBox.margin><Insets left="3"/></VBox.margin>
            </VBox>
        </VBox>
        <VBox.margin><Insets top="10" bottom="5" right="10" left="10"/></VBox.margin>
    </HBox>

	<SplitPane VBox.vgrow="ALWAYS" >
		<TableView fx:id="tvClientSide" minWidth="100" editable="true" onMouseClicked="#tvOnMouseClickedClient"> <!--   -->

            <HBox.margin><Insets top="5" bottom="3" right="5" left="10"/></HBox.margin>

            <columns>
            	<TableColumn text="D" fx:id="columnClientFolderMark" minWidth="30" prefWidth="30">
					<cellValueFactory><PropertyValueFactory property="folderMark" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Имя" fx:id="columnClientFileName" minWidth="20" prefWidth="150">
					<cellValueFactory><PropertyValueFactory property="fileName" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Размер" fx:id="columnClientFileSize" minWidth="20" prefWidth="90" >
					<cellValueFactory><PropertyValueFactory property="size" />
					</cellValueFactory>
					<cellFactory>
						<FormattedTableCellFactory alignment="right">
						</FormattedTableCellFactory>
					</cellFactory>
				</TableColumn>
				<TableColumn text="Изменён" fx:id="columnClientModified" minWidth="20" prefWidth="130">
					<cellValueFactory><PropertyValueFactory property="timeModified" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Создан" fx:id="columnClientCreated" minWidth="20" prefWidth="130">
					<cellValueFactory><PropertyValueFactory property="timeCreated" />
					</cellValueFactory>
				</TableColumn>
			</columns>

			<contextMenu>
				<ContextMenu fx:id="menuClientTableActions">
					<items>
						<MenuItem text="Открыть папку" 				userData="dir"  onAction="#onactionMenuClient_OpenFolder" mnemonicParsing="false"/>
						<MenuItem text="Отправить файл на сервер"	userData="file" onAction="#onactionMenuClient_Upload" mnemonicParsing="false"/>
						<MenuItem text="Создать папку"								onAction="#onactionMenuClient_CreateFolder" mnemonicParsing="false"/>
						<SeparatorMenuItem/>
						<MenuItem text="Удалить"					userData="any"  onAction="#onactionMenuClient_Delete" mnemonicParsing="false"/>
					</items>
				</ContextMenu>
			</contextMenu>

		</TableView>

		<TableView fx:id="tvServerSide" minWidth="100" editable="true" onMouseClicked="#tvOnMouseClickedServer">

            <HBox.margin><Insets top="5" bottom="3" right="5" left="10"/></HBox.margin>

            <columns>
            	<TableColumn text="D" fx:id="columnServerFolderMark" minWidth="30" prefWidth="30">
					<cellValueFactory><PropertyValueFactory property="folderMark" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Имя" fx:id="columnServerFileName" minWidth="20" prefWidth="150">
					<cellValueFactory><PropertyValueFactory property="fileName" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Размер" fx:id="columnServerFileSize" minWidth="20" prefWidth="90" >
					<cellValueFactory><PropertyValueFactory property="size" />
					</cellValueFactory>
					<cellFactory>
						<FormattedTableCellFactory alignment="right">
						</FormattedTableCellFactory>
					</cellFactory>
				</TableColumn>
				<TableColumn text="Изменён" fx:id="columnServerModified" minWidth="20" prefWidth="130">
					<cellValueFactory><PropertyValueFactory property="timeModified" />
					</cellValueFactory>
				</TableColumn>
				<TableColumn text="Создан" fx:id="columnServerCreated" minWidth="20" prefWidth="130">
					<cellValueFactory><PropertyValueFactory property="timeCreated" />
					</cellValueFactory>
				</TableColumn>
			</columns>

			<contextMenu>
				<ContextMenu fx:id="menuServerTableActions">
					<items>
						<MenuItem text="Открыть папку"			userData="dir"	onAction="#onactionMenuServer_OpenFolder" mnemonicParsing="false"/>
						<MenuItem text="Отправить файл клиенту" userData="file" onAction="#onactionMenu_Download" mnemonicParsing="false"/>
						<MenuItem text="Создать папку"							onAction="#onactionMenuServer_CreateFolder" mnemonicParsing="false"/>
						<SeparatorMenuItem/>
						<MenuItem text="Удалить"				userData="any"  onAction="#onactionMenuServer_Delete" mnemonicParsing="false"/>
					</items>
				</ContextMenu>
			</contextMenu>

		</TableView>

	</SplitPane>

    <HBox>
        <HBox HBox.hgrow="ALWAYS" alignment="CENTER">
            <Button text="Отправить на сервер &gt;"
                    fx:id="buttonUpload"
                    onAction="#onactionMenuClient_Upload"
                    alignment="CENTER" prefWidth="200" prefHeight="35"/>
        </HBox>
        <HBox HBox.hgrow="ALWAYS" alignment="CENTER">
            <Button text="&lt; Загрузить с сервера"
                    fx:id="buttonDownload"
                    onAction="#onactionMenu_Download"
                    alignment="CENTER" prefWidth="200" prefHeight="35"/>
        </HBox>
        <VBox.margin><Insets top="5" bottom="3" right="10" left="10"/></VBox.margin>
    </HBox>

    <HBox>
        <Text fx:id="textStatusBar"/>
        <VBox.margin><Insets top="5" bottom="7" right="7" left="7"/></VBox.margin>
    </HBox>

</VBox>
